{"title":"Unity ML-Agents 第一章：建構環境","date":"2019-01-30T18:46:25.000Z","date_formatted":{"ll":"Jan 31, 2019","L":"01/31/2019","MM-DD":"01-31"},"thumbnail":"https://cdn-images-1.medium.com/max/2544/1*Rl1cSxiTeWM8wMXhQQtrQw.png","link":"2019/01/31/Unity_ML_01","comments":true,"tags":["Machine Learning","Reinforcement Learning","Unity ML"],"categories":["Unity ML"],"updated":"2020-04-13T23:55:01.632Z","content":"<p>因為大家對於Unity的環境建置一直都有困擾(畢竟一直是BETA版沒辦法統一)，因此想到寫一篇標準的SOP流程來介紹如何安裝UnityML。</p>\n<img src=\"https://cdn-images-1.medium.com/max/2544/1*Rl1cSxiTeWM8wMXhQQtrQw.png\" style=\"max-width: 100%;\"><h3 id=\"windows環境\">Windows環境<a href=\"#windows環境\" title=\"Windows環境\"></a></h3><p>1：通過Anaconda安裝Python，下載並安裝<a href=\"https://www.anaconda.com/distribution/\" target=\"_blank\">Anaconda</a>。這是一個很好管理環境的軟體(Container)，可以隨時切換環境來適應專案，請下載Python3.6以上的版本，Unity ML-Agents不支援Python 2。</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*7gae78K8pFX-XI5sMW651A.png\" style=\"max-width: 100%;\">&gt;</p>\n<p>注意：記得勾選上面的選項加入環境PATH(建議全部勾選)。</p>\n<p>2：然後開啟命令列工具（Window+R打CMD）輸入</p>\n<pre><code>conda create -n ml-agents python=3.6</code></pre><p>中間過程會問你要不要安裝新的軟體，打 y按ENTER，完成之後就會創建一個在Anaconda裡獨立的Python環境，為了能夠穩定測試各功能，用UnityML開發時的軟體版本會比較好。</p>\n<p>完成之後會出現</p>\n<pre><code>#\n# To activate this environment, use:\n# &gt; activate ml-agents\n#\n# To deactivate an active environment, use:\n# &gt; deactivate\n#\n# * for power-users using bash, you must source\n#</code></pre><p>很明顯的只要輸入</p>\n<pre><code>activate ml-agents</code></pre><p>就會在你的當下直接轉換成ml-agents的環境，基本上你的命令列左邊應該會出現環境名稱，代表你已經在環境裡面了，這時候你做的事情都是用這個環境去執行的。</p>\n<p>3：安裝Tensorflow<br>這邊分兩個部分，一個是有GPU的(我假設開發Unity的人都是用Nvidia GPU顯示卡)，而且都有顯示卡。一樣版本固定，除非官方有出新的指示說最新的TF版本，不然最好都用指定的(目前是1.7.1)，因為TF每個版本函數都會改，都有相依性問題。</p>\n<pre><code>pip install tensorflow-gpu==1.7.1</code></pre><p>(選用)沒GPU的這個指令</p>\n<pre><code>pip install tensorflow==1.7.1</code></pre><p>4：下載Unity ML-Agents Toolkit整個工具包<br>假設你有裝Git工具，在命令列直接打</p>\n<pre><code>git clone [https://github.com/Unity-Technologies/ml-agents.git](https://github.com/Unity-Technologies/ml-agents.git)</code></pre><p>然後等下載好之後進到這個目錄(注意，裡面還有一個ml-agents)</p>\n<pre><code>cd ml-agents\\ml-agents</code></pre><p>(選用)假如你沒有git工具，直接到github下載他們的工具包，</p>\n<img src=\"https://cdn-images-1.medium.com/max/2512/1*jBTwdcUrR86OvzVq4a5kWA.png\" style=\"max-width: 100%;\"><p>解壓縮完之後用命令列打 cd 解壓縮完的目錄\\ml-agents<br>5：安裝工具包<br>這邊要注意你的環境已經在上面說的ml-agents，而且命令列也在解壓縮完的目錄裡面的ml-agents(有兩層ml-agents\\ml-agents)。確認好之後打</p>\n<pre><code>pip install -e .</code></pre><p>6：安裝Unity3D<br>官方指建議Unity 2017.4版以後的版本，這邊建議大家用<a href=\"https://unity3d.com/get-unity/download\" target=\"_blank\">UnityHub</a>做安裝。</p>\n<p>7：完成建置</p>\n<p>在結束這章節以前請大家先下載好<a href=\"https://s3.amazonaws.com/unity-ml-agents/0.5/TFSharpPlugin.unitypackage\" target=\"_blank\">TensorFlowSharp</a>，這個是用來載入預訓練好的模型用的。</p>\n<p>覺得這些流程有幫助到你的話多給我幾個掌聲～可以連拍到50下唷～有問題可以在下面留言，我盡可能幫忙解答。</p>\n<h3 id=\"os-x環境\">OS X環境<a href=\"#os-x環境\" title=\"OS X環境\"></a></h3><p>1：通過Anaconda安裝Python，下載並安裝<a href=\"https://www.anaconda.com/distribution/\" target=\"_blank\">Anaconda</a>。這是一個很好管理環境的軟體(Container)，可以隨時切換環境來適應專案，請下載Python3.5以上的版本，Unity ML-Agents不支援Python 2。</p>\n<img src=\"https://cdn-images-1.medium.com/max/2000/1*7Iq_XnrrXk93M5SYROaXEw.png\" style=\"max-width: 100%;\"><p>統一都用Anaconda是因為安裝環境包都會比較方便。</p>\n<p>2：然後開啟命令列工具（Command+Space 打terminal.app）輸入</p>\n<p>PS: 目前支援的Tensorflow環境只有到Python 3.6，如果直接裝到3.7以上會找不到Tensorflow</p>\n<pre><code>conda create -n ml-agents python=3.6</code></pre><p>接下來就會自動安裝好環境，安裝完成會出現下列訊息</p>\n<pre><code>#\n# To activate this environment, use\n#\n#     $ conda activate ml-agents\n#\n# To deactivate an active environment, use\n#\n#     $ conda deactivate</code></pre><p>載入環境</p>\n<pre><code>conda activate ml-agents</code></pre><p>接下來安裝Tensorflow，因為OSX除了舊型的Nvidia顯卡以外基本上都沒有新版的，AMD的加速還沒有完整測試穩定性，因此我們還是用原本的CPU跑(這專案用顯卡加速也只是用CUDA做平行運算，沒有快多少)</p>\n<pre><code>pip install tensorflow==1.7.1</code></pre><p>(選用)如果堅持要用GPU加速的可以用這指令，如果是AMD的朋友記得去找關於AMD CUDA加速的套件</p>\n<pre><code>pip install tensorflow-gpu==1.7.1</code></pre><p>3：下載Unity ML-Agents Toolkit整個工具包<br>在命令列直接打</p>\n<pre><code>git clone [https://github.com/Unity-Technologies/ml-agents.git](https://github.com/Unity-Technologies/ml-agents.git)</code></pre><p>然後等下載好之後進到這個目錄(注意，裡面還有一個ml-agents)</p>\n<pre><code>cd ml-agents\\ml-agents</code></pre><p>4：安裝工具包<br>這邊要注意你的環境已經在上面說的ml-agents，而且命令列也在解壓縮完的目錄裡面的ml-agents(有兩層ml-agents\\ml-agents)。確認好之後打</p>\n<pre><code>pip install -e .</code></pre><p>5：安裝Unity3D</p>\n<p>官方指建議Unity 2017.4版以後的版本，這邊建議大家用<a href=\"https://unity3d.com/get-unity/download\" target=\"_blank\">UnityHub</a>做安裝。</p>\n<p>6：完成建置</p>\n<p>在結束這章節以前請大家先下載好<a href=\"https://s3.amazonaws.com/unity-ml-agents/0.5/TFSharpPlugin.unitypackage\" target=\"_blank\">TensorFlowSharp</a>，這個是用來載入預訓練好的模型用的。</p>\n<p>如果本篇文章有幫到你的忙，<br>選單的<a href=\"https://www.paypal.me/ChenKuanSun\" target=\"_blank\">Donate</a>可以請我喝一杯英式紅茶拿鐵，<br>讓我有更多的咖啡因(X)</p>\n<p>接下來下一個章節：</p>\n<h2 id=\"unity-ml-agents-第二章：範本介紹\"><a href=\"./Unity-ML/2\">Unity ML-Agents 第二章：範本介紹</a><a href=\"#unity-ml-agents-第二章：範本介紹\" title=\"Unity ML-Agents 第二章：範本介紹\"></a></h2>","prev":{"title":"Unity ML-Agents 第二章：範本介紹","link":"2019/02/01/Unity_ML_02"},"plink":"https://chenkuansun.github.io/2019/01/31/Unity_ML_01/","toc":[{"id":"windows環境","title":"Windows環境","index":"1"},{"id":"os-x環境","title":"OS X環境","index":"2"}]}