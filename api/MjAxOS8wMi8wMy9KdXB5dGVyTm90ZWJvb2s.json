{"title":"JupyterNotebook with Anaconda 導入Module老問題","date":"2019-02-02T18:46:25.000Z","date_formatted":{"ll":"Feb 3, 2019","L":"02/03/2019","MM-DD":"02-03"},"thumbnail":"https://cdn-images-1.medium.com/max/2752/1*WgYIbhfkPlRCqxPb23OzCQ.png","link":"2019/02/03/JupyterNotebook","comments":true,"tags":["Anaconda","Jupyter Notebook"],"categories":["Problem resolving"],"updated":"2020-04-13T23:55:01.575Z","content":"<p>在windows常常遇到Jupyter Notebook import不到模組，可是在純命令列中用Python卻一直都是正常的導入，到底問題在哪裡。</p>\n<img src=\"https://cdn-images-1.medium.com/max/2752/1*WgYIbhfkPlRCqxPb23OzCQ.png\" style=\"max-width: 100%;\"><p>每次都要Google，每次遇到的答案不是說Conda install重裝等等，一堆月經文加月經答案。只好動手寫一個比較完整的作法。</p>\n<p>先來解析為什麼都抓不到模組。打開一個新筆記本，輸入</p>\n<pre><code>!jupyter kernelspec list</code></pre><p>會發現Python核心檔案是吃到Windows本地的Python，而不是我們創建的虛擬環境核心檔案。</p>\n<pre><code>Available kernels:\n python3 C:\\Users\\XXXXXX\\AppData\\Roaming\\jupyter\\kernels\\python3</code></pre><p>為什麼呢，因為有可能是原本Windows有裝了Python套件跟JupyterNotebook(像我就有很多專案，需要各種不同的執行測試)，然後在Anaconda 裡直接輸入套用環境</p>\n<pre><code>activate vir-env</code></pre><p>然後開啟Jupyter Notebook會開到自己系統裡面的，Windows不像是Linux系統那樣可以用source activate vir-env那樣開啟一個全隔離的環境。因此找來找去找到一個很棒的Jupyter Notebook<a href=\"http://stuartmumford.uk/blog/jupyter-notebook-and-conda.html\" target=\"_blank\">核心管理包</a>，只要在要開Jupyter Notebook的環境下打</p>\n<pre><code>pip install environment_kernels</code></pre><p>(選用)如果以前沒有做過設定檔，輸入以下指令生成一個Jupyter Notebook設定檔，生完之後會出現設定檔路徑</p>\n<pre><code>jupyter notebook — generate-config</code></pre><p>到 jupyter_notebook_config.py路徑下，加入兩行</p>\n<pre><code>c.NotebookApp.kernel_spec_manager_class = &apos;environment_kernels.EnvironmentKernelSpecManager&apos; c.EnvironmentKernelSpecManager.conda_env_dirs=[&apos;~/.conda/envs&apos;]</code></pre><p>儲存之後，打開jupyter notebook，在kernal裡面會找到你所有虛擬環境的核心檔，只要選擇你的環境，就可以正常使用了。</p>\n<img src=\"https://cdn-images-1.medium.com/max/3026/1*YMfYK2431dn-ZNRy6VQ_Pg.png\" style=\"max-width: 100%;\"><p>如果想了解更深入的內容，可以到作者<a href=\"https://github.com/Cadair/jupyter_environment_kernels\" target=\"_blank\">Github</a>上看解說。</p>\n<p>如果本篇文章有幫到你的忙，<br>選單的<a href=\"https://www.paypal.me/ChenKuanSun\" target=\"_blank\">Donate</a>可以請我喝一杯英式紅茶拿鐵，<br>讓我有更多的咖啡因(X)</p>\n","prev":{"title":"LIFF 與 Angular 共舞 — 實作 — 01","link":"2019/06/11/LIFF_01"},"next":{"title":"Unity ML-Agents 第三章：訓練範本","link":"2019/02/03/Unity_ML_03"},"plink":"https://chenkuansun.github.io/2019/02/03/JupyterNotebook/"}